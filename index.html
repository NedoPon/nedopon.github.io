<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animated-entry {
            animation: fadeIn 0.5s ease-out;
        }
        
        .hover-scale {
            transition: transform 0.3s ease;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        .role-badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .student-table {
            border-collapse: separate;
            border-spacing: 0 15px;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="text-center mb-4 animated-entry">üìö –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</h1>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="nav nav-pills justify-content-center mb-4 animated-entry">
            <button class="nav-link active" onclick="showSection('users')">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
            <button class="nav-link" onclick="showSection('grades')">–û—Ü–µ–Ω–∫–∏</button>
        </nav>

        <!-- –°–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        <section id="usersSection" class="animated-entry">
            <div class="card hover-scale mb-4">
                <div class="card-header">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                </div>
                <div class="card-body">
                    <form id="userForm" onsubmit="addUser(event)">
                        <div class="mb-3">
                            <input type="text" class="form-control" placeholder="–ò–º—è" required>
                        </div>
                        <div class="mb-3">
                            <select class="form-select" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
                                <option>–£—á–µ–Ω–∏–∫</option>
                                <option>–£—á–∏—Ç–µ–ª—å</option>
                                <option>–†–æ–¥–∏—Ç–µ–ª—å</option>
                                <option>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </form>
                </div>
            </div>

            <div class="row" id="usersList"></div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –æ—Ü–µ–Ω–æ–∫ -->
        <section id="gradesSection" class="d-none animated-entry">
            <div class="card hover-scale">
                <div class="card-header">
                    <h3>–ñ—É—Ä–Ω–∞–ª –æ—Ü–µ–Ω–æ–∫</h3>
                </div>
                <div class="card-body">
                    <table class="table student-table">
                        <thead>
                            <tr>
                                <th>–£—á–µ–Ω–∏–∫</th>
                                <th>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</th>
                                <th>–†—É—Å—Å–∫–∏–π</th>
                                <th>–ò—Å—Ç–æ—Ä–∏—è</th>
                                <th>–§–∏–∑–∏–∫–∞</th>
                            </tr>
                        </thead>
                        <tbody id="gradesTable"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
        if(!localStorage.users) localStorage.users = JSON.stringify([]);
        if(!localStorage.grades) localStorage.grades = JSON.stringify({});

        function showSection(section) {
            document.querySelectorAll('section').forEach(s => s.classList.add('d-none'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            
            document.getElementById(section + 'Section').classList.remove('d-none');
            event.target.classList.add('active');
        }

        function addUser(e) {
            e.preventDefault();
            const form = e.target;
            const user = {
                name: form[0].value,
                role: form[1].value,
                id: Date.now()
            };

            const users = JSON.parse(localStorage.users);
            users.push(user);
            localStorage.users = JSON.stringify(users);

            renderUsers();
            form.reset();
        }

        function renderUsers() {
            const users = JSON.parse(localStorage.users);
            const colors = {
                '–£—á–µ–Ω–∏–∫': 'bg-primary',
                '–£—á–∏—Ç–µ–ª—å': 'bg-success',
                '–†–æ–¥–∏—Ç–µ–ª—å': 'bg-warning',
                '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 'bg-danger'
            };

            const html = users.map(user => `
                <div class="col-md-3 mb-3">
                    <div class="card hover-scale">
                        <div class="card-body">
                            <h5>${user.name}</h5>
                            <span class="role-badge ${colors[user.role]} text-white">
                                ${user.role}
                            </span>
                        </div>
                    </div>
                </div>
            `).join('');

            document.getElementById('usersList').innerHTML = html;
        }

        function renderGrades() {
            const grades = JSON.parse(localStorage.grades);
            const users = JSON.parse(localStorage.users).filter(u => u.role === '–£—á–µ–Ω–∏–∫');
            
            const html = users.map(student => `
                <tr>
                    <td>${student.name}</td>
                    ${['–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', '–†—É—Å—Å–∫–∏–π', '–ò—Å—Ç–æ—Ä–∏—è', '–§–∏–∑–∏–∫–∞'].map(subject => `
                        <td>
                            <input type="number" min="2" max="5" 
                                   value="${grades[student.id]?.[subject] || ''}" 
                                   onchange="updateGrade(${student.id}, '${subject}', this.value)"
                                   class="form-control form-control-sm">
                        </td>
                    `).join('')}
                </tr>
            `).join('');

            document.getElementById('gradesTable').innerHTML = html;
        }

        function updateGrade(studentId, subject, grade) {
            const grades = JSON.parse(localStorage.grades);
            if(!grades[studentId]) grades[studentId] = {};
            grades[studentId][subject] = grade;
            localStorage.grades = JSON.stringify(grades);
        }

        // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
        renderUsers();
        renderGrades();
    </script>
</body>
</html>
